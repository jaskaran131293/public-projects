{{ '//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js' | script_tag }}
{{ 'api.jquery.js' | shopify_asset_url | script_tag }}

<div class="collection-template-bundel-back">
  <div class="collection-template-bundel-heading">
    <h1 class="text-center">YOUR CHARM BUNDLE</h1>
  </div>

  <div class="container main_container">
    <div class="collection-bundle-grid">
      <div class="collection-bundle-left">
        <div class="fdfdg">
          <ul>
            <li class="active_li_collection" data-step="1"><a href="#" data-step="1">Choose Your Charms</a></li>
            <li data-step="2"><a href="#" data-step="2">Choose Your Chain</a></li>
            <li data-step="3"><a href="#" data-step="3">Choose Your Charm Holder</a></li>
            <li data-step="4"><a href="#" data-step="4" >Complimentary Soldering</a></li>          
          </ul>
        </div>

        <div class="fdfdg--content">
          <ul class="tabs-contents">
            <li class="tab-items" data-step="1" >
              <h2 class="bundle-builder-app--bundle--section-name">Choose Your Charms</h2>
              <div class="product-list-ddo">
                <ul class="product-list-grid">
                  {% paginate collection.products by 100 %}
                  {% assign s = 1 %}
                  {%- for product in collection.products -%}
                  {% assign productTags = product.tags | join: ', ' %}
                  
                  {% if productTags contains 'your-charm' %}              
                  <li class="bundle---product" data-typee='' id="pro-{{ s }}">
                    <div class="">
                      <div class="bundle-builder-app--bundle--product-link">
                        <img class="bundle--product-image" alt="Catherine Key Charm Only" sizes="(max-width: 767px) 50vw, 33vw" src="{{ product.featured_image | product_img_url: 'large' }}" alt="{{ product.title | escape }}">

                      </div>
                      <div class="bundle--product-details">
                        <h3 class="bundle--product-name">{{ product.title }}</h3>
                        <div class="bundle--product-options-form">                        
                          {% if product.variants.size > 1 %}
                          {% for option in product.options_with_values %}
                          <div class="bundle--product-options">                        
                            <label for="product-option-0" class="bundle--product-select-label">{{ option.name }}</label>
                            <div class="bundle--select-container">
                              <select id="product-option{{ product.id }}-{{ forloop.index0 }}" class="bundle--select {{ product.id }}">
                                {% for value in option.values %}
                                <option {% if option.selected_value == value %}selected{% endif %}>{{ value }}</option>
                                {% endfor %}
                              </select>
                            </div>
                          </div>
                          {% endfor %}
                          {% endif %}
                        </div>
                        <div class="bundle--price"><span class="money" data-price="{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros   }}{%- else -%}{{ product.price | money_without_trailing_zeros   }}{%- endif -%}">{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros }}{%- else -%}{{ product.price | money_without_trailing_zeros }}{%- endif -%}</span></div>
                        {% if productTags contains 'Engraving Available' %}
                        <div style="text-align: center;margin-top: 20px;"> 
                        	<a class="add_engraving" data-title="{{ product.title }}" style="font-size: 12px;border-bottom: 1px dashed;">Add Engraving</a>
                          <a class="close_engraving" title="Close" style="display:none;"></a>
                        </div>
                        
                        <div class="custom-engraving" style="display:none">
                          <div class="product-engraving--variant" data-types="laser-hand">
                            <input type="hidden" value="31681952383024" data-var-price="$250.00" data-var-name="Block Noodle 34 / Hand Engraving / $250" disabled="">
                          </div>
                          <h5 class="ce--title no-engraving">Add CUSTOM ENGRAVING  <span id="engraving-price"></span>  <span id="engraving-lettermax-phrase"></span></h5>
                          <input type="hidden" value="4446320853040" id="engraving-product" disabled="">                        
                          <div class="product-engraving--options">
                            <div class="pe--options-val options-type" id="pe-option-type">
                              <strong class="h5 pe--options-title">Choose Type</strong>
                              <div class="pe--options" data-opt-="type">
                                <select name="properties[Engraving Type]" id="engraving-type-selector" class="engraving-type-selector">
                                  
                                  <option value="none">No Engraving</option>
                                  {% if productTags contains 'both_engraving' or  productTags contains 'hand_engraving' %}
                                  <option value="Hand Engraving">Hand Engraving</option>
                                  {% endif %}
                                  {% if productTags contains 'both_engraving' or  productTags contains 'laser_engraving' %}
                                  <option value="Laser">Laser Engraving</option>
                                  {% endif %}
                                </select>
                              </div>
                            </div>
                            <div class="pe--options-val options-style hide" data-option="Hand Engraving" id="pe-option-hand-style">
                              <strong class="h5 pe--options-title">Choose Hand Engraving Style</strong>
                              <div class="pe--options" data-opt-="style">
                                <label class="pe--option"><input type="radio" class="radio_one" data-price="25000" data-varid="36458245062820" name="properties[Engraving Style]" value="Block Noodle 34">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/block-noodle_97c0e03a-b83f-47a3-a7cf-81d7a9d2acb1.png?v=1581554236);"></span>
                                  </span>
                                  <span class="lbl-val">Block Noodle 34</span>
                                </label>
                                <label class="pe--option"><input data-price="25000" type="radio" class="radio_one" data-varid="36458245062820" name="properties[Engraving Style]" value="Block Samton 45">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/block-samton_5a029279-c0f2-480a-b195-036abf0fb78e.png?v=1581554236);"></span>
                                  </span>
                                  <span class="lbl-val">Block Samton 45</span>
                                </label>
                                <label class="pe--option"><input data-price="25000" type="radio" class="radio_one" data-varid="36458245062820" name="properties[Engraving Style]" value="Block Emerald Isle 48">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/block-emerald-isle_e1b74347-1e79-43c3-8dc0-d867671099df.png?v=1581554236);"></span>
                                  </span>
                                  <span class="lbl-val">Block Emerald Isle 48</span>
                                </label>
                                <label class="pe--option"><input data-price="25000" type="radio" class="radio_one" data-varid="36458245062820" name="properties[Engraving Style]" value="Old English 31">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/old-english_473121e4-d48d-44d8-b058-c6a08560da12.png?v=1581554237);"></span>
                                  </span>
                                  <span class="lbl-val">Old English 31</span>
                                </label>
                                <label class="pe--option"><input data-price="25000" type="radio" class="radio_one" data-varid="36458245062820" name="properties[Engraving Style]" value="Amazone Script 38">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/amazone-script_da4c871a-70a0-4156-b154-6a9ded1e1a91.png?v=1581554237);"></span>
                                  </span>
                                  <span class="lbl-val">Amazone Script 38</span>
                                </label>
                                <label class="pe--option"><input data-price="25000" type="radio" class="radio_one" data-varid="36458245062820" name="properties[Engraving Style]" value="Roman Wallington 17">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/roman-wallington_42907b76-3353-4f9c-a5f8-f5bb9ff0ea9f.png?v=1581554237);"></span>
                                  </span>
                                  <span class="lbl-val">Roman Wallington 17</span>
                                </label>
                                <label class="pe--option"><input data-price="25000" type="radio" class="radio_one" data-varid="36458245062820" name="properties[Engraving Style]" value="Jade Trau Signature">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/jade-trau-signature_f52f5ebc-a359-4b43-a046-729358ebc08f.png?v=1581554237);"></span>
                                  </span>
                                  <span class="lbl-val">Jade Trau Signature</span>
                                </label>
                              </div>
                            </div>
                            <div class="pe--options-val options-style hide" data-option="Laser" id="pe-option-laser-style">
                              <strong class="h5 pe--options-title">Choose Laser Engraving Style</strong>
                              <div class="pe--options" data-opt-="style">
                                <label class="pe--option"><input data-price="10000" type="radio" class="radio_one" name="properties[Engraving Style]" value="Copperplate">
                                  <span class="pe--option-lbl">
                                    <span class="pe--option-img" style="background-image: url(//cdn.shopify.com/s/files/1/2481/7858/products/Copperplate.jpg?v=1582048575);"></span>
                                  </span>
                                  <span class="lbl-val">Copperplate</span>
                                </label>
                              </div>
                            </div>
                          </div>
                          <input type="hidden" name="properties[Engraving]" value="false" id="engraving-property" disabled="">
                          <input type="hidden" value="" id="engraving-style" disabled="">
                          <input type="hidden" value="" id="engraving-variant" disabled="">
                          <div class="opt-engraving--text hide">
                            <label for="engraving-text" class="h5 pe--options-title">Enter Text</label>
                            <input type="text" name="properties[Engraving Text]" maxlength="4" id="engraving-text" class="product-engraving--text">
                            <p class="engraving-disclaimer" style="display: none" id="hand-disclaimer">All letters, numbers, spaces, and the following symbols are accepted: # + - = . &amp; ❤</p>
                            <p class="engraving-disclaimer" style="display: none" id="laser-disclaimer">All letters, numbers, spaces and the following symbols are accepted: # + - = . &amp;</p>
                          </div>
                          <!--<button type="button" id="btn-engraving-product" class="btn btn-primary">Add Custom Engraving</button>-->
                        </div>
                        {% endif %}
                        <div class="bundle--wrapper"><button type="button" data-price="" data-id="{{ product.id }}" data-value="" class="bundle---button bundle--product-add-button add-bundle-cart" tabindex="0" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Add</span></button></div>
                      </div>
                    </div>                  
                  </li> 
                  {% assign s = s | plus: 1 %}
                  {% endif %}
                  {% endfor %}
                  {% endpaginate %}
                </ul>
              </div>
              <div class="bundle-builder-app--bundle--nav-buttons"><div class="bundle-builder-app--bundle--nav-buttons--next"><button data-step="1" type="button" class="button_action bundle-builder-app--button bundle-builder-app--bundle--button--next" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Next</span></button></div></div>
            </li>
            <li class="tab-items" data-step="2">
              <h2 class="bundle-builder-app--bundle--section-name">Choose Your Chain + Length</h2>
              <div class="product-list-ddo">
                <ul class="product-list-grid">
                  {% paginate collection.products by 100 %}
                  {% assign ss = s %}
                  {%- for product in collection.products -%}
                  
                  {% assign productTags = product.tags | join: ', ' %}
                  
                  {% if productTags contains 'your_chain_length' %}  
                 
                  <li class="bundle---product" id="pro-{{ ss }}">
                    <div class="">
                      <div class="bundle-builder-app--bundle--product-link">
                        <img class="bundle--product-image" alt="" sizes="(max-width: 767px) 50vw, 33vw" src="{{ product.featured_image | product_img_url: 'large' }}" alt="{{ product.title | escape }}">

                      </div>
                      <div class="bundle--product-details">
                        <h3 class="bundle--product-name">{{ product.title }}</h3>
                        <div class="bundle--product-options-form">
                          {% if product.variants.size > 1 %}
                          {% for option in product.options_with_values %}
                          <div class="bundle--product-options">
                            <label for="product-option-0" class="bundle--product-select-label">{{ option.name }}</label>
                            <div class="bundle--select-container">

                              <select id="product-option{{ product.id }}-{{ forloop.index0 }}" class="bundle--select {{ product.id }}" tabindex="0">
                                {% for value in option.values %}
                                <option {% if option.selected_value == value %}selected{% endif %}>{{ value }}</option>
                                {% endfor %}
                              </select>                              
                            </div>
                          </div>
                          {% endfor %}
                          {% endif %}
                        </div>
                        <select id="product-selectors" class="product-selector test{{ product.id }}" name="id" style="display:none">
                          {% for variant in product.variants %}
                          <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} value="{{ variant.price | money_without_trailing_zeros }}">{{ variant.title }}</option>
                          {% endfor %}
                        </select>
                        <div class="bundle--price"><span class="money" data-price="{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros   }}{%- else -%}{{ product.price | money_without_trailing_zeros   }}{%- endif -%}">{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros }}{%- else -%}{{ product.price | money_without_trailing_zeros }}{%- endif -%}</span></div>
                        
                        <script>
                          var id = {{ product.id }};
                          $('.'+id).change(function(){
                            var val = $(this).text();
                            var var1 = $('#product-option'+{{ product.id }}+'-0').val();
                            var var2 = $('#product-option'+{{ product.id }}+'-1').val();
                            var var3 = $('#product-option'+{{ product.id }}+'-2').val();
                            if(var1 && var2 && var3){
                              $('.test'+{{ product.id }} +' option').each(function( index ) {                               
                                  var valll = var1+' / '+var2+' / '+var3;                                
                                  var text = $(this).text();
                                  if($( this ).text()  == valll){
                                    $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price',$(this).val());
                                    $(this).closest('.bundle--product-details').find('.bundle--price .money').text($(this).val());
                                  }
                                  
                              }); 	
                            }else if((var3 == undefined) && var2 && var1){
								$('.test'+{{ product.id }} +' option').each(function( index ) {                               
                                  var valll = var1+' / '+var2;                                
                                  var text = $(this).text();
                                  if($( this ).text()  == valll){
                                    $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price',$(this).val());
                                    $(this).closest('.bundle--product-details').find('.bundle--price .money').text($(this).val());
                                  }
                                  
                              }); 	
                            }else if((var3 == undefined) && (var2 == undefined) && var1){
								$('.test'+{{ product.id }} +' option').each(function( index ) {                               
                                  var valll = var1;                                
                                  var text = $(this).text();
                                  if($( this ).text()  == valll){
                                    $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price',$(this).val());
                                    $(this).closest('.bundle--product-details').find('.bundle--price .money').text($(this).val());
                                  }
                                  
                              }); 	
                            }else{

                            }
                          });
                          </script>
                        <div class="bundle--wrapper"><button type="button" data-price="" data-value="" data-id="{{ product.id }}" class="bundle---button bundle--product-add-button add-bundle-cart" tabindex="0" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Add</span></button></div>
                      </div>
                    </div>
                  </li> 
                  {% assign ss = ss | plus: 1 %}
                  {% endif %}
                  {% endfor %}
                  {% endpaginate %}
                </ul>
              </div>
              <div class="bundle-builder-app--bundle--nav-buttons"><div class="bundle-builder-app--bundle--nav-buttons--next"><button data-step="2" type="button" class="button_action bundle-builder-app--button bundle-builder-app--bundle--button--next" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Next</span></button></div></div>

            </li>
            <li class="tab-items" data-step="3">
              <h2 class="bundle-builder-app--bundle--section-name">Choose Your Charm Holder</h2>
              <div class="product-list-ddo">
                <ul class="product-list-grid">
                  {% paginate collection.products by 100 %}
                  {% assign sss = ss %}
                  {%- for product in collection.products -%}
                  {% assign productTags = product.tags | join: ', ' %}
                  
                  {% if productTags contains 'your-holder' %}              
                  <li class="bundle---product" id="pro-{{ sss }}">
                    <div class="">
                      <div class="bundle-builder-app--bundle--product-link">
                        <img class="bundle--product-image" alt="Catherine Key Charm Only" sizes="(max-width: 767px) 50vw, 33vw" src="{{ product.featured_image | product_img_url: 'large' }}" alt="{{ product.title | escape }}">

                      </div>
                      <div class="bundle--product-details">
                        <h3 class="bundle--product-name">{{ product.title }}</h3>
                        <div class="bundle--product-options-form">
                          {% if product.variants.size > 1 %}
                          {% for option in product.options_with_values %}
                          <div class="bundle--product-options">
                            <label for="{{ forloop.index0 }}" class="bundle--product-select-label">{{ option.name }}</label>
                            <div class="bundle--select-container">

                              <select id="product-option{{ product.id }}-{{ forloop.index0 }}" class="bundle--select {{ product.id }}" tabindex="0">
                                {% for value in option.values %}
                                <option {% if option.selected_value == value %}selected{% endif %}>{{ value }}</option>
                                {% endfor %}
                              </select>

                            </div>
                          </div>
                          {% endfor %}
                          {% endif %}

                        </div>
                        <div class="bundle--price"><span class="money" data-price="{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros   }}{%- else -%}{{ product.price | money_without_trailing_zeros   }}{%- endif -%}">{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros }}{%- else -%}{{ product.price | money_without_trailing_zeros }}{%- endif -%}</span></div>
                        <div class="bundle--wrapper"><button type="button" data-id="{{ product.id }}" data-price="" data-value="" class="bundle---button bundle--product-add-button add-bundle-cart" tabindex="0" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Add</span></button></div>
                      </div>
                    </div>
                  </li> 
                  {% assign sss = sss | plus: 1 %}
                  {% endif %}
                  {% endfor %}
                  {% endpaginate %}
                </ul>
              </div>
              <div class="bundle-builder-app--bundle--nav-buttons"><div class="bundle-builder-app--bundle--nav-buttons--next"><button data-step="3" type="button" class="button_action bundle-builder-app--button bundle-builder-app--bundle--button--next" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Next</span></button></div></div>

            </li>
			
            <li class="tab-items" data-step="4">
              <h2 class="bundle-builder-app--bundle--section-name">Complimentary Soldering</h2>
              <div class="product-list-ddo">
                <ul class="product-list-grid">
                  {% paginate collection.products by 100 %}
                  {% assign ssss = sss %}
                  {%- for product in collection.products -%}
                  {% assign productTags = product.tags | join: ', ' %}
                  
                  {% if productTags contains 'bundel-soldering' %}              
                  <li class="bundle---product" id="pro-{{ ssss }}">
                    <div class="">
                      <div class="bundle-builder-app--bundle--product-link">
                        <img class="bundle--product-image" alt="Catherine Key Charm Only" sizes="(max-width: 767px) 50vw, 33vw" src="{{ product.featured_image | product_img_url: 'large' }}" alt="{{ product.title | escape }}">

                      </div>
                      <div class="bundle--product-details">
                        <h3 class="bundle--product-name">{{ product.title }}</h3>
                        <div class="bundle--product-options-form">
                          {% if product.variants.size > 1 %}
                          {% for option in product.options_with_values %}
                          <div class="bundle--product-options">
                            <label for="product-option-0" class="bundle--product-select-label">{{ option.name }}</label>
                            <div class="bundle--select-container">

                              <select id="product-option{{ product.id }}-{{ forloop.index0 }}" class="bundle--select {{ product.id }}">
                                {% for value in option.values %}
                                <option {% if option.selected_value == value %}selected{% endif %}>{{ value }}</option>
                                {% endfor %}
                              </select>

                            </div>
                          </div>
                          {% endfor %}
                          {% endif %}

                        </div>
                        <div class="bundle--price"><span class="money" data-price="{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros   }}{%- else -%}{{ product.price | money_without_trailing_zeros   }}{%- endif -%}">{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros }}{%- else -%}{{ product.price | money_without_trailing_zeros }}{%- endif -%}</span></div>
                        <div class="bundle--wrapper"><button type="button" data-id="{{ product.id }}"  data-price="" data-value="" class="bundle---button bundle--product-add-button add-bundle-cart" tabindex="0" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Add</span></button></div>
                      </div>
                    </div>
                  </li> 
                  {% assign ssss = ssss | plus: 1 %}
                  {% endif %}
                  {% endfor %}
                  {% endpaginate %}
                </ul>
              </div>
              <div class="bundle-builder-app--bundle--nav-buttons"><div class="bundle-builder-app--bundle--nav-buttons--next"><button  type="button" class="button_action bundle-builder-app--button bundle-builder-app--bundle--button--next trigger_popup_fricc" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Next</span></button></div></div>
            </li>
            {% comment %}
            <li class="tab-items" data-step="5">
              <h2 class="bundle-builder-app--bundle--section-name">Add Engraving</h2>
              <div class="product-list-ddo">
                <ul class="product-list-grid">
                  {%- for product in collection.products -%}
                  {% assign productTags = product.tags | join: ', ' %}
                  <!--Now Check for the desired tag name-->
                  {% if productTags contains 'your-engraving' %}              
                  <li class="bundle---product">
                    <div class="">
                      <div class="bundle-builder-app--bundle--product-link">
                        <img class="bundle--product-image" alt="Catherine Key Charm Only" sizes="(max-width: 767px) 50vw, 33vw" src="{{ product.featured_image | product_img_url: 'large' }}" alt="{{ product.title | escape }}">

                      </div>
                      <div class="bundle--product-details">
                        <h3 class="bundle--product-name">{{ product.title }}</h3>
                        <div class="bundle--product-options-form">

                          {% for option in product.options_with_values %}
                          <div class="bundle--product-options">
                            <label for="product-option-0" class="bundle--product-select-label">{{ option.name }}</label>
                            <div class="bundle--select-container">

                              <select id="product-option{{ product.id }}-{{ forloop.index0 }}" class="bundle--select {{ product.id }}">
                                {% for value in option.values %}
                                <option {% if option.selected_value == value %}selected{% endif %}>{{ value }}</option>
                                {% endfor %}
                              </select>

                            </div>
                          </div>
                          {% endfor %}


                        </div>
                        <div class="bundle--price"><span class="money" data-price="{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros   }}{%- else -%}{{ product.price | money_without_trailing_zeros   }}{%- endif -%}">{%- if product.price_varies -%}{{ product.price_min | money_without_trailing_zeros }}{%- else -%}{{ product.price | money_without_trailing_zeros }}{%- endif -%}</span></div>
                        <div class="bundle--wrapper"><button type="button" data-price="" data-value="" class="bundle---button bundle--product-add-button add-bundle-cart" tabindex="0" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span>Add</span></button></div>
                      </div>
                    </div>
                  </li> 
                  {% endif %}
                  {% endfor %}
                </ul>
              </div>
            </li>
            {% endcomment %}
          </ul>
        </div>

      </div>
	  <input type="hidden" class="total_pricewww" value=''>
      <div class="collection-bundle-right">
        <div class="collection-text--">
          <span class="no_pro">No products have been added to the bundle yet</span>
          <div style="display:none;" class="proval bundle-builder-app--bundle--summary bundle-builder-app--bundle--summary--add-enabled">
            <div>
              <span class="bundle-builder-app--bundle--price-box">
                <span class="bundle-builder-app--bundle--price-label"><span>Bundle price</span></span>
                <div class="bundle-builder-app--bundle--price"><span class="bundle-builder-app--bundle--total-price"><span class="money"></span></span></div>
              </span>
              <div class="bundle-builder-app--button-container"><button type="button" class=" bundle-builder-app--bundle--view-contents--button trigger_popup_fricc" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><span >View bundle contents</span><span class="bundle-bundler-app--view-contents--number-of-products"> (1)</span></button><button type="button" class="added_to_cart bundle-builder-app--bundle--add-to-cart-button" tabindex="0" style="color: rgb(255, 255, 255); background: rgb(58, 58, 58);"><img class="loder_img" style="display:none; width:14%" src="https://cdn.shopify.com/s/files/1/0418/3723/2292/files/loading.gif?v=1604901348"><span class="add_bundel_tocart">Add bundle to cart</span></button></div>
            </div>
          </div>
          </div>
      </div>

    </div>
  </div>
</div>

<div class="hover_bkgr_fricc custom_poup">
  <span class="helper"></span>
  <div>
    <div class="popupCloseButton">&times;</div>
    <div class="final_bundle"></div>
    <div class="bundle-builder-app--bundle--summary">
      <span class="bundle-builder-app--bundle--price-box">
        <span class="bundle-builder-app--bundle--price-label"><span>Bundle price</span></span>
        <div class="bundle-builder-app--bundle--price"><span class="bundle-builder-app--bundle--total-price"></span></div>
      </span>
      <div class="bundle-builder-app--bundle-contents-modal--footer">
        <button type="button" class="bundle-builder-app--button bundle-builder-app--bundle--add-to-cart-button added_to_cart button_custom" tabindex="0" ><span >Add bundle to cart</span></button>
        <div class="bundle-builder-app--bundle-contents-modal--bundle-errors"></div>        
      </div>
    </div>
  </div>
</div>

<form id="formthis">
  <input type="hidden" name="title" value="Default Title,Your Charm Bundle">
  <input type="hidden" name="img" value="https://cdn.shopify.com/s/files/1/0418/3723/2292/products/bundle_compact.jpeg?v=1601763623"> 
  <input type="hidden" name="price" class="last_balue" value=""> 
  <input type="hidden" name="list" class="listing_title" value="">  
</form>

<style>
  .custom_poup .bundle-builder-app--product--quantity.sub-result-pop {display:none}
  .collection-template-bundel-back {
    background: #bbb2b2 !important;
  }

  .collection-template-bundel-heading h1 {
    color: #fff !important;
    margin: 42px 0;
  }

  .collection-bundle-left ul {
    list-style: none;
  }

  .collection-bundle-left a {
    color: #fff !important;
    font-size: 20px;
  }

  .collection-bundle-grid {
    display: flex;
  }

  .collection-bundle-right {
    width: 24%;
    margin-left: 2%;
  }
  .collection-bundle-left {
    width: 74%;
  }
  .collection-bundle-left .fdfdg ul {
    margin: 0;
    padding: 0;
    display: table;
    table-layout: fixed;
    width: 100%;
    font-size: 1.5em;
    margin-bottom: 60px;
    z-index: 0;
    position: relative;
  }

  .collection-bundle-left .fdfdg ul > li {
    position: relative;
    display: table-cell;
    text-align: center;
    font-size: 20px !important;
  }
  h2.bundle-builder-app--bundle--section-name::after {
    content: '';
    width: 100%;
    height: 1px;
    background: #ddd;
    display: block;
    margin-top: .5rem;
  }
  .collection-bundle-left .fdfdg ul > li::before {
    content: attr(data-step);
    display: block;
    margin: 0 auto;
    width: 2em;
    height: 2em;
    text-align: center;
    margin-bottom: 0.25em;
    line-height: 2em;
    border-radius: 100%;
    position: relative;
    z-index: 1000;
    cursor: pointer;
    box-shadow: 0px 0px 0px 0 var(--button-text-color, #fff) inset;
      transition: box-shadow 0.5s ease;
      background: #3f3e40;
      color: var(--button-text-color, #fff);
        line-height: 1.7em;
        }
  .collection-bundle-left ul > li.active_li_collection::before {
    color: var(--button-text-color, #fff);
      background: #3f3e40;
      box-shadow: 0px 0px 0px 2px var(--button-text-color, #fff) inset;
        border: 1px solid var(--button-bg-color, #000);
          }

  .collection-bundle-left .fdfdg ul > li::after {
    content: '';
    position: absolute;
    display: block;
    width: 100%;
    height: 1px;
    top: 14px;
    left: 50%;
    margin-left: 1.5em\9;
    z-index: 0;
    background: #3f3e40;
    color: var(--button-text-color, #fff);
      }
  .collection-bundle-left .fdfdg ul > li:last-child::after {
    display:none;
  }
  .collection-text-- span {
    padding: 0px;
    display: block;
    text-align: center;
    color: #fff;
  }

  .collection-text-- {
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 20px;
    text-align: center;
  }
  h2.bundle-builder-app--bundle--section-name {
    color: #fff;
    text-align: center;
    margin-bottom: 7px;
  }
  ul.product-list-grid {
    display: grid;
    grid-template-columns: repeat(3,1fr);
    grid-gap: 42px 14px;
  }

  h3.bundle--product-name {
    font-size: 15px !important;
    line-height: 55px!important;
    font-weight: 300!important;
    margin: .5rem 0;
    color: #fff !important;
    text-align: center;
  }
  .bundle--product-options {
    margin-bottom: 20px;
  }
  label.bundle--product-select-label {
    margin-bottom: .25rem;
    width: 100%;
    text-align: center;
    color: #fff;
  } 
  .bundle--select-container {
    text-align: center;
    position:relative;
    max-width:300px;
    margin:0 auto;
  }
  .template-collection .bundle--select {
    border: 1px solid #ddd;
    border-radius: 4px;
    width: 100%;
    max-width: 300px;
    padding: 13.5px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    text-align: center;
    padding-right: 28px;
    cursor: pointer;
    background: transparent;
    color: inherit;
    font-size: 15px !important;
    padding: 0 15px;
    text-transform: none;
    color: #fff;
  }
  .bundle--select-container::after{
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 5px solid #fff;
    content: '';
    right: 11px;
    top: 45%;
    position: absolute;
  }
  button.bundle---button.bundle--product-add-button {
    width: 100%;
    max-width: 310px;
    margin-top: 1rem;
    padding: 0.6em 2em 0.7em;
    border: none;
    transition: all 0.2s linear;
  }

  .bundle--wrapper {
    text-align: center;
  }

  .bundle--price span {
    color: #fff !important;
    font-size: 14px;
    text-align: center;
    display: block;
    font-weight: bold;
  }

  li.tab-items:not(:first-child) {
    display: none;
  }

  @media only screen and (max-width:845px){
    .collection-bundle-grid {
      flex-wrap: wrap;
    }

    .collection-bundle-left {
      width: 100%;
    }

    .collection-bundle-right {
      width: 100%;
      margin: 2% 0;
    }

    .collection-bundle-left .fdfdg ul > li a {
      display: none;
    }

    .collection-bundle-left .fdfdg ul > li::after {
      top: 20px;
    }
  }
  @media only screen and (max-width:690px){
    ul.product-list-grid {
      grid-template-columns: repeat(2,1fr);
      grid-gap: 42px 14px;
    }
  }

  .bundle-builder-app--product--quantity {
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-top: 1rem;
    display: flex;
    flex-wrap: wrap;
    max-width: 150px;
    width: 100%;
    margin: 1rem auto 0;
    justify-content: space-between;
  }

  .bundle-builder-app--quantity--variant.var-title {
    flex: 0 0 100%;
    padding-bottom: 0;
    padding-left: .5rem;
    padding-right: .5rem;
    padding-top: 0.5rem;
    font-size: 14px;
    color: #fff;
  }

  button.bundle-builder-app--button {border: none;padding: 0;width: 44px;flex: 1;height: 33px;color: #fff !important;}    


  span.bundle-builder-app--quantity--amount {
    line-height: 33px;
    color: #fff;
  }

  button.button_action.bundle-builder-app--button.bundle-builder-app--bundle--button--next {
    padding: 0.6em 2em 0.7em;
    background: #3a3a3a !important;
    width: auto;
    height: auto;
  }

  .bundle-builder-app--bundle--nav-buttons--next {
    text-align: right;
  }
  .hover_bkgr_fricc{
    background:rgba(0,0,0,.4);
    cursor:pointer;
    display:none;
    height:100%;
    position:fixed;
    text-align:center;
    top:0;
    width:100%;
    z-index:10000;
  }
  .hover_bkgr_fricc .helper{
    display:inline-block;
    height:100%;
    vertical-align:middle;
  }
  .hover_bkgr_fricc > div {
    background-color: #fff;
    box-shadow: 10px 10px 60px #555;
    display: inline-block;
    height: auto;
    max-width: 551px;
    min-height: 100px;
    vertical-align: middle;
    width: 60%;
    position: relative;
    border-radius: 8px;
    padding: 15px 5%;
  }
  .popupCloseButton {
    background-color: #fff;
    border: 3px solid #999;
    border-radius: 50px;
    cursor: pointer;
    display: inline-block;
    font-family: arial;
    font-weight: bold;
    position: absolute;
    top: -20px;
    right: -20px;
    font-size: 25px;
    line-height: 30px;
    width: 30px;
    height: 30px;
    text-align: center;
  }
  .popupCloseButton:hover {
    background-color: #ccc;
  }
  .trigger_popup_fricc {
    cursor: pointer;
    display: inline-block;

  }

  .custom_poup li.bundle-builder-app--bundle--contents-item {
    list-style: none;
    margin: 0;
    width: 33.33%;
    padding: 0 10px 30px 10px;
  }
  .custom_poup.hover_bkgr_fricc > div {
    box-shadow: 10px 10px 60px #555;
    display: inline-block;
    height: auto;
    min-height: 100px;
    width: 60%;
    max-width: 950px;
    margin-left: auto;
    margin-right: auto;
    border: none !important;
    color: #333;
    position: absolute;
    background: rgb(255, 255, 255) none repeat scroll 0% 0%;
    overflow: auto;
    border-radius: 4px;
    outline: currentcolor none medium;
    padding: 3rem;
    overflow-x: hidden;
    left: 0;
    right: 0;
    transform: translate(0%, -50%);
    top: 50%;
    max-height:80vh;
  }
  .custom_poup.hover_bkgr_fricc {
    background: rgba(100, 100, 100, 0.75);
  }
  .custom_poup .final_bundle {
    display: flex;
    flex-wrap: wrap;
  }
  .custom_poup h3.bundle-builder-app--bundle--contents-name {
    font-size: 30px !important;
    line-height: 1.3 !important;
  }
  .custom_poup .bundle-builder-app--bundle--contents-price .money {
    font-weight: 700;
    color: #333;
    font-size: 14px;
    margin: 0 0 15px 0;
    display: inline-block;
  }
  .custom_poup .bundle-builder-app--button.bundle-builder-app--bundle--contents-remove-button {
    width: 100%;
    display: block;
    margin-top: 15px;
    height: auto;
    line-height: 40px;
    background: #333;
  }
  .custom_poup .bundle-builder-app--bundle--contents--quantity {
    border: 1px solid #ddd;
    border-radius: 4px;
    display: flex;
    flex-wrap: wrap;
    max-width: 150px;
    width: 100%;
    margin: 1rem auto 0;
    justify-content: space-between;
  }
  .custom_poup .bundle-builder-app--button.bundle-builder-app--bundle--contents-add, 
  .custom_poup .bundle-builder-app--bundle--contents-subtract {
    background: none !important;
    color: inherit !important;
    border: none;
    padding: 0;
    width: 44px;
    flex: 1;
    color: #333;
  }
  .custom_poup .bundle-builder-app--bundle--contents-quantity {
    flex: 1;
    text-align: center;
    display: inline-block;
    padding: .5em 0;
  }
  .custom_poup .bundle-builder-app--bundle--contents--quantity {
    border: 1px solid #ddd;
    border-radius: 4px;
    display: flex;
    flex-wrap: wrap;
    max-width: 150px;
    width: 100%;
    margin: 0 auto 0;
    justify-content: space-between;
  }
  .custom_poup .popupCloseButton {
    border: none;
    cursor: pointer;
    font-family: arial;
    font-weight: normal;
    font-size: 40px;
    line-height: 30px;
    height: 30px;
    text-align: center;
    position: absolute;
    background: #fff !important;
    z-index: 20;
    padding: 0;
    top: 20px;
    right: 20px;
    width: 30px;
    float: right;
  }
  @media (max-width:690px) {
    .custom_poup.hover_bkgr_fricc > div {
      padding: 15px;
      width: 100%;
      max-width: 85%;
      max-height:500px;
    }
    .custom_poup li.bundle-builder-app--bundle--contents-item {
      width: 100%;
    }
    .custom_poup .final_bundle {
      display: block;
    }
  }
</style>

<script>
  $(".fdfdg li").click(function(){
    $(this).addClass("active_li_collection").siblings().removeClass("active_li_collection");
    var tab = $(this).data("step");
    $('.tabs-contents li').each(function(){
      var tabs = $(this).data("step"),
          taber = $(this)

      if(tabs == tab){      
        taber.show().siblings().hide();
      }
    });
  });

  $(".button_action").click(function(){
    $('html, body').animate({
      scrollTop: $("#header-content").offset().top
    }, 1500);
    
    var tab = $(this).attr("data-step");
    if(tab == '1'){
      $('.tab-items:nth-child(1)').hide();      
      $('.tab-items:nth-child(2)').show();
      $('.tab-items:nth-child(3)').hide();
      $('.tab-items:nth-child(4)').hide();
      $('.tab-items:nth-child(5)').hide();
      $('.fdfdg ul li:nth-child(2)').addClass('active_li_collection');
      $('.fdfdg ul li:nth-child(1)').removeClass('active_li_collection');
    }else if(tab == '2'){
      $('.tab-items:nth-child(1)').hide();      
      $('.tab-items:nth-child(2)').hide();
      $('.tab-items:nth-child(3)').show();
      $('.tab-items:nth-child(4)').hide();
      $('.tab-items:nth-child(5)').hide();
      $('.fdfdg ul li:nth-child(3)').addClass('active_li_collection');
      $('.fdfdg ul li:nth-child(2)').removeClass('active_li_collection');
    }else if(tab == '3'){
      $('.tab-items:nth-child(1)').hide();      
      $('.tab-items:nth-child(2)').hide();
      $('.tab-items:nth-child(3)').hide();
      $('.tab-items:nth-child(4)').show();
      $('.tab-items:nth-child(5)').hide();
      $('.fdfdg ul li:nth-child(4)').addClass('active_li_collection');
      $('.fdfdg ul li:nth-child(3)').removeClass('active_li_collection');
    }else if(tab == '4'){
      $('.tab-items:nth-child(1)').hide();      
      $('.tab-items:nth-child(2)').hide();
      $('.tab-items:nth-child(3)').hide();
      $('.tab-items:nth-child(4)').hide();
      $('.tab-items:nth-child(5)').show();
      $('.fdfdg ul li:nth-child(5)').addClass('active_li_collection');
      $('.fdfdg ul li:nth-child(4)').removeClass('active_li_collection');
    }
  });

  // A $( document ).ready() block.
  $( document ).ready(function() {
    $('.add_engraving').click(function(){ 
      $(this).closest('.bundle--product-details').find('.custom-engraving').show();
      $(this).closest('.bundle--product-details').find('.close_engraving').show();

    });
    $('.close_engraving').click(function(){ 
      $(this).closest('.bundle--product-details').find('.custom-engraving').hide();
      $(this).closest('.bundle--product-details').find('.close_engraving').hide();
      $(this).closest('.bundle--product-details').find('#engraving-text').val('');
	  var valuesss = $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-price');
    
      if(valuesss){
        var gss = parseInt(valuesss) - 250;

        $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-price',gss);

        var sum1 = 0;
        var sun = 0;
        $('.bundle---button').each(function() { 
          sum1 += Number($(this).attr('data-price'));
          sun += Number($(this).attr('data-value'));
        });  
        $('.total_pricewww').val(sum1);
        $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");

        $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);      
      }
    });
    
    var countt = 0;   
    $('.add-bundle-cart').click(function(){ 
      
      var proid = $(this).parent().parent().parent().parent().attr('id');
      
      $('.no_pro').hide();
      $('.proval').show();
      $('.cart-empty').hide();
      $('.mini_cart_header').show();
      var id = $(this).attr('data-id');    
      var very = $(this).closest('li').find('#product-option'+id+'-0').val();
      var very1 = $(this).closest('li').find('#product-option'+id+'-1').val();
      var very2 = $(this).closest('li').find('#product-option'+id+'-2').val();
     
      if(very1){
        var veryy1 = very1.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-').toLowerCase();
      }

      if(very2){
        var veryy2 = very2.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-').toLowerCase();
      }
      if(very){
        var veryy = very.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-').toLowerCase();
      }
      if((very2 == undefined) && (very1 == undefined) && (very != undefined) ){
		console.log('for one varinat');
        if($(this).closest('li').find('.'+veryy).length){ 
          var count = 0;
          var vall = $(this).closest('li').find('.'+veryy+'test').text();
          var fin_val = parseInt(vall) + 1;
          $(this).closest('li').find('.'+veryy+'test').text(fin_val); 
          
          $(this).closest('li').find('.'+veryy+'test').attr('data-value',fin_val);
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          $('.'+modify+veryy).attr('data-value',fin_val);
          $('.'+modify+veryy+'appednded_quanity').text(fin_val);
          $(this).closest('li').attr('data-typee',fin_val);
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').text();
		  
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {
            count += parseInt($(this).text());
          });
          
          var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');         
          var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
          var eng_titl = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
          if(eng_titl){            
          var price = parseInt(pra) + parseInt($(this).attr('data-price'));  
          }else{
          var price = parseInt(pra) * count;  
          }
          $(this).attr('data-price',price);
          $(this).attr('data-value',count);
          $(this).text(count+' added');         

        }
        else{
          var html = "<div class='bundle-builder-app--product--quantity sub-result-pop'><span class='"+veryy+" bundle-builder-app--quantity--variant var-title'>"+very+"</span><button class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll' >-</button><span class='bundle-builder-app--quantity--amount "+veryy+"test' data-value='1'>1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll' >+</button></div>";
          $(this).after(html);
          var imag =  $(this).closest('li').find('.bundle--product-image').attr('src');
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          var price = $(this).closest('li').find('.money').text();
          var engraving = $(this).closest('li').find('.custom-engraving').find('#engraving-type-selector').val();
          var engra_val = $(this).closest('li').find('.custom-engraving').find('input[name="properties[Engraving Style]"]:checked').val();
          var eng_titl = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
   
          if((engraving != undefined) && (engraving != "none")){
            var e = $(this).closest('li').find('.custom-engraving').find('#engraving-type-selector').val();
          }else{
            var e = "";          
          }

          if(engra_val){
            var f = engra_val;
          }else{
            var f ="";          
          }
          
          if(eng_titl){
          
          var g = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
          
          }else{
          var g = "";
          
          }
          
          var data = $(this).attr('data-value');
                    
          var count = 0;
          if(data){
            $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {            
              count += parseInt($(this).text());             
            });
            $(this).attr('data-value',count);
            var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');         
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
            
            var adding = $(this).attr('data-price');
            var price = parseInt(pra) + parseInt(adding);
            $(this).attr('data-price',price);
           
            $(this).text(count+' added');
            var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name "+veryy+"' data-quantity=''>"+title+" - "+very+" "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'>$"+adding+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+modify+veryy+"appednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+"' data-value='1'><span>Remove</span></button></div></li>";
            $('.final_bundle').append(product);
            console.log('fresh add');
            
          }else{
            console.log('readded add');
            
            var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price'); 
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
            
            if(g){
              if(engraving == "Laser"){
                var rr = parseInt(pra) + 100;
              }else{
                var rr = parseInt(pra) + 250;
              }

              $(this).attr('data-price',rr);
              var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name "+veryy+"' data-quantity=''>"+title+" - "+very+" "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'> $"+rr+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+modify+veryy+"appednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+"' data-value='1'><span>Remove</span></button></div></li>";
              $('.final_bundle').append(product);
              
              console.log('1 readded add');
            }else{

              $(this).attr('data-price',pra);
              var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name "+veryy+"' data-quantity=''>"+title+" - "+very+" "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'> $"+pra+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+modify+veryy+"appednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+"' data-value='1'><span>Remove</span></button></div></li>";
              $('.final_bundle').append(product);
              
              console.log('2 readded add');
            }

            $(this).attr('data-value','1');         
            $(this).text('1 added');

          }
         
         if($(this).closest('div').find('.sub-result-pop').length && $(this).attr('data-value') >=1){
           
          $(this).closest('div').find(".bundle-builder-app--button--decrease").click(function(){ 
           
            var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
            var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
            var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
            var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');   
			
            if(value > 1){
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
              $('.'+modify|veryy+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
            } else {             
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
             $('.'+modify+veryy+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
             
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
              
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').text('Add')
              $(this).text('Add');
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value', 0);
              $(this).closest('.bundle-builder-app--product--quantity').remove();             
            }
          });

           $(this).closest('div').find(".bundle-builder-app--button--increase").click(function(){
             var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
             var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
             var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
             var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
             var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 

             var total = parseInt(value) + 1;          
             var total_price = parseInt(prices) + parseInt(pra);
             $('.'+modify+veryy+'appednded_quanity').text(total);
             $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
             $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
             $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
             var sum = 0;
             $('.bundle---button').each(function() { 
               sum += Number($(this).attr('data-value'));
             });      


             var sum2 = 0;  
             $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
               sum2 += Number($(this).attr('data-value'));
             });
             $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
             $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');


             $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
             var sum1 = 0;
             var sun = 0;
             $('.bundle---button').each(function() { 
               sum1 += Number($(this).attr('data-price'));
               sun += Number($(this).attr('data-value'));
             });  
             $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");

             $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
             $('.total_pricewww').val(sum1);

           });
         } 
        }   

      } else if((very2 == undefined) && (very1 != undefined) && (very != undefined)){

        if($(this).closest('li').find('.'+veryy+veryy1).length){      
          var count = 0;
          var vall = $(this).closest('li').find('.'+veryy+veryy1+'test').text();
          var fin_val = parseInt(vall) + 1;
           $('.'+veryy+veryy1+'appednded_quanity').text(fin_val);
          $(this).closest('li').find('.'+veryy+veryy1+'test').text(fin_val);  
          $(this).closest('li').find('.'+veryy+veryy1+'test').attr('data-value',fin_val);
          $(this).closest('li').attr('data-typee',fin_val);
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').text();
		  var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          $('.'+modify+veryy+veryy1).attr('data-value',fin_val); 
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {
            count += parseInt($(this).text());
          });
          var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');         
          var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');          
          var price = parseInt(pra) * count;  
          $(this).attr('data-price',price);
          $(this).attr('data-value',count);
          $(this).text(count+' added');  
          
        }
        else{ 
         
          var html = "<div class='bundle-builder-app--product--quantity sub-result-pop'><span class='"+veryy+veryy1+" bundle-builder-app--quantity--variant var-title'>"+very+"/"+very1+"</span><button class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+veryy+veryy1+"test' data-value='1'>1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div>";

          $(this).after(html);
          
          var imag =  $(this).closest('li').find('.bundle--product-image').attr('src');
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          var price = $(this).closest('li').find('.money').text();
          var engraving = $(this).closest('li').find('.custom-engraving').find('#engraving-type-selector').val();
          var engra_val = $(this).closest('li').find('.custom-engraving').find('input[name="properties[Engraving Style]"]:checked').val();
          var eng_titl = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
   
          if((engraving != undefined) && (engraving != "none")){
            var e = $(this).closest('li').find('.custom-engraving').find('#engraving-type-selector').val();
          }else{
            var e = "";          
          }

          if(engra_val){
            var f = engra_val;
          }else{
            var f ="";          
          }
          
          if(eng_titl){
          
          var g = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
          
          }else{
          var g = "";
          
          }
          var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name "+veryy+veryy1+"' data-quantity=''>"+title+" - "+very+" "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'>"+price+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+modify+veryy+veryy1+"appednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+veryy1+"' data-value='1'><span>Remove</span></button></div></li>";
          $('.final_bundle').append(product);
          var data = $(this).attr('data-value');
          
          
          var count = 0;
          if(data){
            $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {            
              count += parseInt($(this).text());             
            });
            $(this).attr('data-value',count);
            var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');         
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');          
            var adding = $(this).attr('data-price');
            
            var price = parseInt(pra) + parseInt(adding);
            
            $(this).attr('data-price',price);
           
            $(this).text(count+' added');
          }else{
           
            var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price'); 
            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');          
            
             $(this).attr('data-price',pra);
            $(this).attr('data-value','1');         
            $(this).text('1 added');
          }
         
         if($(this).closest('div').find('.sub-result-pop').length && $(this).attr('data-value') >=1){
           
          $(this).closest('div').find(".bundle-builder-app--button--decrease").click(function(){ 
           
            var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
            var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
            var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
            var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');   
			
            if(value > 1){
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
              $('.'+modify+veryy+veryy1+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
            } else {             
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
             $('.'+modify+veryy+veryy1+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
             
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').text('Add')
              $(this).text('Add');
              $(this).closest('.bundle-builder-app--product--quantity').remove();             
            }
          });
           
           $(this).closest('div').find(".bundle-builder-app--button--increase").click(function(){
             var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
             var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
             var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
             var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
             var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
             
              var total = parseInt(value) + 1;          
              var total_price = parseInt(prices) + parseInt(pra);
             $('.'+modify+veryy+veryy1+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
             $('.total_pricewww').val(sum1);
            
           });
         } 
        } 

      } else if((very2 != undefined) && (very1 != undefined) && (very != undefined)){ 
		
        if($(this).closest('li').find('.'+veryy+veryy1+veryy2).length){      
          var count = 0;        
          var vall = $(this).closest('li').find('.'+veryy+veryy1+veryy2+'test').text();
          var fin_val = parseInt(vall) + 1;
          $('.'+modify+veryy+veryy1+veryy2+'appednded_quanity').text(fin_val);
          $(this).closest('li').find('.'+veryy+veryy1+veryy2+'test').text(fin_val);   
          $(this).closest('li').find('.'+veryy+veryy1+veryy2+'test').attr('data-value',fin_val);
          $(this).closest('li').attr('data-typee',fin_val);
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').text();
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          $('.'+veryy+veryy1+veryy2).attr('data-value',fin_val); 
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {
            count += parseInt($(this).text());
          });
          $(this).attr('data-value',count);
          $(this).text(count+' added');
		  var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');         
          var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');          
          var price = parseInt(pra) * count;
          
          $(this).attr('data-price',price);	 
        }else{		
          var html = "<div class='bundle-builder-app--product--quantity sub-result-pop'><span class='"+veryy+veryy1+veryy2+" bundle-builder-app--quantity--variant var-title'>"+very+"/"+very1+"/"+very2+"</span><button class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+veryy+veryy1+veryy2+"test' data-value='1'>1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div>";

          $(this).after(html);
          var imag =  $(this).closest('li').find('.bundle--product-image').attr('src');
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          $('.'+modify).attr('data-value',fin_val); 
          var price = $(this).closest('li').find('.money').text();
          var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name'>"+title+" - "+very+"/"+very1+"/"+very2+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'>"+price+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+modify+veryy+veryy1+veryy2+"appednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+veryy1+veryy2+"'><span>Remove</span></button></div></li>";
          $('.final_bundle').append(product);    
          var count = 0;
          var data = $(this).attr('data-value');
          
          if(data){
            $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {            
              count += parseInt($(this).text());            
            });
			var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');        
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
            var adding = $(this).attr('data-price');
            var price = parseInt(pra) + parseInt(adding);
            $(this).attr('data-price',price);
            $(this).attr('data-value',count);
            $(this).text(count+' added');
          }else{
            var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');          
			
            $(this).attr('data-price',pra);
            $(this).attr('data-value','1');          
            $(this).text('1 added');
          }
          
          if($(this).closest('div').find('.sub-result-pop').length >= 1){
          $(this).closest('div').find(".bundle-builder-app--button--decrease").click(function(){      
            var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
            var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
            var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
            var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');   
			
            if(value > 1){
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
              $('.'+modify+veryy+veryy1+veryy2+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
            } else {
             var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
             $('.'+modify+veryy+veryy1+veryy2+'appednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').text('Add')
              $(this).text('Add');
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value', 0);
              $(this).closest('.bundle-builder-app--product--quantity').remove();            
            }
          });
            
           $(this).closest('div').find(".bundle-builder-app--button--increase").click(function(){
             var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
             var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
             var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
             var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
             var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
             
              var total = parseInt(value) + 1;      
             $('.'+modify+veryy+veryy1+veryy2+'appednded_quanity').text(total);
              var total_price = parseInt(prices) + parseInt(pra);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
             $('.total_pricewww').val(sum1);
            
           });
          }
        } 

      }
      else{
        if($(this).closest('li').find('.testinga').length){      
		  var count = 0;
          var vall = $(this).closest('li').find('.testingtt').text();
          var fin_val = parseInt(vall) + 1;
           
          $(this).closest('li').find('.testingtt').text(fin_val);  
          $(this).closest('li').find('.testingtt').attr('data-value',fin_val);
          $(this).closest('li').attr('data-typee',fin_val);
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          $('.'+modify+'testingttappednded_quanity').text(fin_val);
          $('.'+modify).attr('data-value',fin_val); 
          var price = $(this).closest('li').find('.money').text();
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').text();
          $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {
            count += parseInt($(this).text());
          });
          $(this).attr('data-value',count);
          $(this).text(count+' added');
        }
        else{

          var html = "<div class='bundle-builder-app--product--quantity sub-result-pop'><span class='testinga bundle-builder-app--quantity--variant var-title'></span><button class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount testingtt' data-value='1'>1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div>";
		  var engraving = $(this).closest('li').find('.custom-engraving').find('#engraving-type-selector').val();
          var engra_val = $(this).closest('li').find('.custom-engraving').find('input[name="properties[Engraving Style]"]:checked').val();
          var eng_titl = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
   
          if((engraving != undefined) && (engraving != "none")){
            var e = $(this).closest('li').find('.custom-engraving').find('#engraving-type-selector').val();
          }else{
            var e = "";          
          }

          if(engra_val){
            var f = engra_val;
          }else{
            var f ="";          
          }
          
          if(eng_titl){
          
          var g = $(this).closest('li').find('.custom-engraving').find('#engraving-text').val();
          
          }else{
          var g = "";
          
          }
          
          var data = $(this).attr('data-value');          
          
          var count = 0;
          $(this).after(html);          
          var imag =  $(this).closest('li').find('.bundle--product-image').attr('src');
          var title = $(this).closest('li').find('.bundle--product-name').text();
          var modify = title.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
          $('.'+modify).attr('data-value',fin_val); 
          var price = $(this).closest('li').find('.money').text();
          
           var count = 0;
          var data = $(this).attr('data-value');
          if(data){
            $(this).closest('li').find('.bundle-builder-app--quantity--amount').each(function() {            
              count += parseInt($(this).text());            
            });
			var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price');        
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
            var adding = $(this).attr('data-price');
            var price = parseInt(pra) + parseInt(adding);
            var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name' data-quantity=''>"+title+" - "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'>"+price+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount "+modify+"testingttappednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+veryy1+"'><span>Remove</span></button></div></li>";
            $('.final_bundle').append(product);
            $(this).attr('data-price',price);
            $(this).attr('data-value',count);
            $(this).text(count+' added');
          }else{
            var pri = $(this).closest('li').find('.bundle--price .money').attr('data-price'); 
            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');          
            if(g){
              if(engraving == "Laser"){
               var rr = parseInt(pra) + 100;
              }else{
               var rr = parseInt(pra) + 250;
              }
             
              $(this).attr('data-price',rr);
              var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name "+veryy+"' data-quantity=''>"+title+" - "+very+" "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'> $"+rr+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount testingttappednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+"' data-value='1'><span>Remove</span></button></div></li>";
            $('.final_bundle').append(product);
            }else{
              $(this).attr('data-price',pra);
              var product = "<li class='bundle-builder-app--bundle--contents-item bundle-builder-app--summary--products-per-row--3'><div><img class='bundle-builder-app--bundle--contents-image' alt='"+very+"' sizes='(max-width: 767px) 50vw, 20vw' srcset='"+imag+"' style='width: 100%; max-width: 1500px;'><h3 class='bundle-builder-app--bundle--contents-name "+veryy+"' data-quantity=''>"+title+" - "+very+" "+e+" "+f+" "+g+"</h3><div class='bundle-builder-app--bundle--contents-price'><span class='money'> $"+pra+"</span></div><div class='bundle-builder-app--product--quantity sub-result-pop'><button disabled class='bundle-builder-app--button bundle-builder-app--button--decrease button_coll'>-</button><span class='bundle-builder-app--quantity--amount testingttappednded_quanity' >1</span><button class='bundle-builder-app--button bundle-builder-app--button--increase button_coll'>+</button></div><button type='button' data-class='"+proid+"' class='bundle-builder-app--button bundle-builder-app--bundle--contents-remove-button "+modify+veryy+"' data-value='1'><span>Remove</span></button></div></li>";
            $('.final_bundle').append(product);
            }
            
            $(this).attr('data-value','1');         
            $(this).text('1 added');
          }
          
          if($(this).closest('div').find('.sub-result-pop').length >= 1){
         $(this).closest('div').find(".bundle-builder-app--button--decrease").click(function(){      
            var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
            var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
            var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
            var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
            var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');   
			
            if(value > 1){
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
              $('.testingttappednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
            } else {
              var total = parseInt(value) - 1;          
              var total_price = parseInt(prices) - parseInt(pra);
             $('.testingttappednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
              
              
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
              $('.total_pricewww').val(sum1);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').text('Add')
              
              /*Added by Jifftech*/
              $(this).text('Add');
              $(this).attr('data-value', 0);
              $(this).closest('.bundle-builder-app--product--quantity').remove();         
            }
          });            
            
           $(this).closest('div').find(".bundle-builder-app--button--increase").click(function(){
             var value = $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value');
             var val = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-value');
             var prices = $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price');
             var pri = $(this).closest('.bundle--product-details').find('.bundle--price .money').attr('data-price');            
             var pra = pri.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
             
              var total = parseInt(value) + 1;          
              var total_price = parseInt(prices) + parseInt(pra);
             $('.testingttappednded_quanity').text(total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').attr('data-value',total);
              $(this).closest('div').find('.bundle-builder-app--quantity--amount').text(total);
              $(this).closest('.bundle--wrapper').find('.add-bundle-cart').attr('data-price',total_price);
              var sum = 0;
              $('.bundle---button').each(function() { 
                sum += Number($(this).attr('data-value'));
              });      
                            
              var sum2 = 0;  
              $(this).closest('.bundle--product-details').find('.bundle-builder-app--quantity--amount').each(function() {
                sum2 += Number($(this).attr('data-value'));
              });
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').attr('data-value',sum2);
              $(this).closest('.bundle--product-details').find('.add-bundle-cart').text(sum2+' added');
              
              
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
              var sum1 = 0;
              var sun = 0;
              $('.bundle---button').each(function() { 
                sum1 += Number($(this).attr('data-price'));
                sun += Number($(this).attr('data-value'));
              });  
              $('.bundle-bundler-app--view-contents--number-of-products').text("("+sun+")");
                          
              $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
             $('.total_pricewww').val(sum1);            
           });                        
          }
        } 
      }      

      var sum = 0;
      $('.bundle---button').each(function() { 
        sum += Number($(this).attr('data-value'));
      });      
      $('.bundle-bundler-app--view-contents--number-of-products').text("("+sum+")");
      var sum1 = 0;
      $('.bundle---button').each(function() { 
        sum1 += Number($(this).attr('data-price'));
      });   
      
      $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+sum1);
      $('.total_pricewww').val(sum1);             
    });
    
    $('.custom_poup').on('click', '.bundle-builder-app--bundle--contents-remove-button', function() { 
      if($('.final_bundle li').length > 0){
        var getidclass = $(this).attr('data-class');
        
        var quanity = $(this).attr('data-value');         
        var amount = $(this).closest('li').find('.money').text();
        var sum1 = $('.total_pricewww').val();
        var pra = amount.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, ''); 

        var hhh = parseInt(pra) * parseInt(quanity);

        var final_val = parseInt(sum1) - parseInt(hhh);
        
        console.log('quanity:'+ quanity);
        console.log('amount:'+ amount);
        console.log('sum1:'+ sum1);
        console.log('pra:'+ pra);
        console.log('hhh:'+ hhh);
        console.log('final_val:'+ final_val);
                
        if(final_val > 0){
          $('.total_pricewww').val(final_val);

          $('.bundle-builder-app--bundle--price-label').html("<span>Bundle price</span> $ "+final_val);
          $(this).closest('li').remove();


          $('#'+getidclass+' .add-bundle-cart').attr('data-value', 0);
          $('#'+getidclass+' .add-bundle-cart').text('Add');
          $('#'+getidclass+' .sub-result-pop').remove();
          
        } else {
          location.reload();
        }
      } else {
        location.reload();
      }
      $('.bundle-bundler-app--view-contents--number-of-products').text('('+$('.final_bundle li').length+')');
    });
  });

  $(document).ready(function() {
    $(".engraving-type-selector").change(function(){
      var title = $(this).parents('.bundle--product-details').find('.bundle--product-name').text();
      if ( $(this).find("option:selected").attr("value") == "none" ){
        var sdfas = $("button#product-add-to-cartt span.price").data("price");
        var sfkgjs = sdfas / 100;

        var sum = "$" + sfkgjs + ".00";
        $("button#product-add-to-cartt span.price").html(sum);
      }

      if($(this).val() == 'none'){
        $(this).closest('.custom-engraving').find('#pe-option-laser-style').addClass('hide');
        $(this).closest('.custom-engraving').find('#pe-option-hand-style').addClass('hide');
        $(this).closest('.custom-engraving').find('#engraving-price').addClass('hide');
        $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').addClass('hide');
        $(this).closest('.custom-engraving').find('.opt-engraving--text').addClass('hide');

      }else if ($(this).val() == 'Hand Engraving'){
        
        if(title == "Mini Catherine Key Charm" || title == "Harlow Key Charm" || title == "Harlow Two-Tone Key Charm" || title == "Tatum Key Charm"){
          $(this).closest('.custom-engraving').find('#engraving-price').text('| +$250');
          $(this).closest('.custom-engraving').find('#engraving-price').removeClass('hide');
          $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').removeClass('hide');
          $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').text('| 3 LETTER MAX');
          $(this).closest('.custom-engraving').find('#engraving-text').attr('maxlength','3');
          $(this).closest('.custom-engraving').find('#pe-option-hand-style').removeClass('hide');
          $(this).closest('.custom-engraving').find('#pe-option-laser-style').addClass('hide');
          $(this).closest('.custom-engraving').find('.opt-engraving--text').removeClass('hide');
        }else{
          $(this).closest('.custom-engraving').find('#engraving-price').text('| +$250');
          $(this).closest('.custom-engraving').find('#engraving-price').removeClass('hide');
          $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').removeClass('hide');
          $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').text('| 4 LETTER MAX');
          $(this).closest('.custom-engraving').find('#engraving-text').attr('maxlength','4');
          $(this).closest('.custom-engraving').find('#pe-option-hand-style').removeClass('hide');
          $(this).closest('.custom-engraving').find('#pe-option-laser-style').addClass('hide');
          $(this).closest('.custom-engraving').find('.opt-engraving--text').removeClass('hide');
        }                             
      }else{
        $(this).closest('.custom-engraving').find('#engraving-price').text('| +$100');
        $(this).closest('.custom-engraving').find('#engraving-price').removeClass('hide');
        $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').removeClass('hide');
        $(this).closest('.custom-engraving').find('#engraving-lettermax-phrase').text('| 12 LETTER MAX');	
        $(this).closest('.custom-engraving').find('#engraving-text').attr('maxlength','12');
        $(this).closest('.custom-engraving').find('#pe-option-laser-style').removeClass('hide');
        $(this).closest('.custom-engraving').find('#pe-option-hand-style').addClass('hide');
        $(this).closest('.custom-engraving').find('.opt-engraving--text').removeClass('hide');
      }    
    });
    
    /*------------Add bundle to cart ---------*/
    $(".added_to_cart").click(function(event){
	  $('.loder_img').show();
       $('.custom_poup').hide();
      $('.add_bundel_tocart').hide();
      var title = 'Default Title,Your Charm Bundle';
      var img = 'https://cdn.shopify.com/s/files/1/0418/3723/2292/products/bundle_compact.jpeg?v=1601763623';
      var sum1 = 0;
      $('.bundle---button').each(function() { 
        sum1 += Number($(this).attr('data-price')); 
      });
      $('.total_pricewww').val(sum1);
      var list = new Array();
      $('.last_balue').val(sum1);
      $('.bundle-builder-app--bundle--contents-name').each(function() {         
        list.push($(this).text());        
      });
      $('.listing_title').val(list);
      if(sum1){
        //event.preventDefault(); //prevent default action 
        var form_data = $('#formthis').serialize();
        var paramss = {
          type: 'POST',
          url: 'https://thefabcode.org/jade-trau/create_product.php',         
          processData: false,
          dataType: 'json',
          data:  form_data,
        };

        $.post(paramss)
        .done(
          function(response) {
            var id = response.product.variants[0].id;
            var product_id = response.product.id;          
            setTimeout(function() {
              jQuery.post('/cart/add.js', {
                items: [
                  {
                    quantity: 1,
                    id: id,
                    properties: {
                      '1': list[0],
                      '2': list[1],
                      '3': list[2],
                      '4': list[3],
                      '5': list[4],
                      '6': list[5],
                      '7': list[6],
                      '8': list[7],
                      '9': list[8],
                      '10': list[9],
                      '11': list[10],
                      '12': list[11],
                      '13': list[12],
                      '14': list[13],
                      '15': list[15],
                    }
                  }
                ]
              });
              setTimeout(function() {          
                window.location.href = "/cart";
              }, 1000);
            }, 1000);

          }.bind(this)
        )
        .fail(
          function(response) {
            console.log(response);
          }.bind(this)
        );

      } else {

        $('.no_pro').show();
        $('.proval').hide();  

      }
    });
    
    /*------------End add bundle to cart------*/
  });

  $(window).load(function () {
    $(".trigger_popup_fricc").click(function(){
      $('.hover_bkgr_fricc').show();
    });
    $('.popupCloseButton').click(function(){
      $('.hover_bkgr_fricc').hide();
    });
  });
</script>