!function(a){"use strict";function t(){a(document).off("click",".rtwpvg-add-image"),a(document).on("click",".rtwpvg-add-image",e),a(document).on("click",".rtwpvg-remove-image",i),a(".woocommerce_variation").each(function(){var t=a(this).find(".options");a(this).find(".rtwpvg-gallery-wrapper").insertBefore(t)})}function e(t){t.preventDefault(),t.stopPropagation();var e=this,i=void 0,r=a(this).data("product_variation_id"),c=a(this).data("product_variation_loop");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(i)return void i.open();(i=wp.media.frames.select_image=wp.media({title:rtwpvg_admin.choose_image,button:{text:rtwpvg_admin.add_image},library:{type:["image"]},multiple:!0})).on("select",function(){var t=i.state().get("selection").toJSON().map(function(t){if("image"===t.type){var e=t.id,i=t.sizes,o=(i=void 0===i?{}:i).thumbnail,a=i.full,n=o?o.url:a.url;return wp.template("rtwpvg-image")({id:e,url:n,product_variation_id:r,loop:c})}}).join("");a(e).parent().prev().find(".rtwpvg-images").append(t),n(),o(e)}),i.open()}}function i(t){t.preventDefault(),t.stopPropagation();var e=this;o(this),setTimeout(function(){a(e).parent().remove()},1)}function o(t){a(t).closest(".woocommerce_variation").addClass("variation-needs-update"),a("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),a("#variable_product_options").trigger("woocommerce_variations_input_changed")}function n(){a(".rtwpvg-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"rtwpvg-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){o(this)}})}a("#rtwpvg-settings-wrapper").on("click",".nav-tab",function(t){t.preventDefault();var e,i=a(this),o=i.data("target");i.addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),a("#"+o).show().siblings().hide(),a("#_last_active_tab").val(o),history.pushState&&(e=function(i,o){var t=window.location.href,e=location.hash;{var a,n;0<=(t=t.replace(e,"")).indexOf("?")?(a=t.substring(t.indexOf("?")+1).split("&"),n=!1,a.forEach(function(t,e){t.split("=")[0]==i&&(a[e]=i+"="+o,n=!0)}),n||a.push(i+"="+o),t=t.substring(0,t.indexOf("?")+1)+a.join("&")):t+="?"+i+"="+o}return t+e}("section",o),window.history.pushState({path:e},"",e))}),a("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){t(),n()}),a("#variable_product_options").on("woocommerce_variations_added",function(){t(),n()})}(jQuery);